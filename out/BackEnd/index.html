<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/MyHomeVer1/_next/static/media/627622453ef56b0d-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/MyHomeVer1/_next/static/media/0e4fe491bf84089c-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/MyHomeVer1/_next/static/media/934c4b7cb736f2a3-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/MyHomeVer1/_next/static/media/7d8c9b0ca4a64a5a-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/MyHomeVer1/_next/static/css/c4b71a578c85f9d2.css" as="style" crossorigin=""/><link rel="stylesheet" href="/MyHomeVer1/_next/static/css/c4b71a578c85f9d2.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/MyHomeVer1/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/MyHomeVer1/_next/static/chunks/webpack-90120dae4de6b90b.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/chunks/framework-314c182fa7e2bf37.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/chunks/main-d0d457d2e56b696c.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/chunks/pages/_app-549632a3d94bf4e7.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/chunks/4939-f906761f014d4b65.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/chunks/pages/BackEnd-e086f35c995534d6.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/TmcmYBuO798HND8jnqDKH/_buildManifest.js" defer="" crossorigin=""></script><script src="/MyHomeVer1/_next/static/TmcmYBuO798HND8jnqDKH/_ssgManifest.js" defer="" crossorigin=""></script></head><body style="height:100vh"><div id="__next"><div style="height:100%"><title>Sonjuhy Portfolio</title><link rel="icon" href="https://sonjuhy.github.io/MyHomeVer1//favicon.ico"/><meta property="og:image" content="https://sonjuhy.github.io/MyHomeVer1//profile.png"/><meta property="og:title" content="Sonjuhy Portfolio"/><meta property="og:description" content="Development History Store"/><meta property="og:type" content="website"/><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorWnb MuiAppBar-positionFixed mui-fixed mui-1a7eqel" style="top:0;z-index:1000"><div class="MuiContainer-root MuiContainer-maxWidthXl mui-1ekb41w"><div class="MuiToolbar-root MuiToolbar-regular mui-12o98wt"><div class="MuiBox-root mui-1t6c9ts"><a class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap mui-a5pkz3" href="https://sonjuhy.github.io/MyHomeVer1/">MyHome Ver.1</a></div><div class="MuiBox-root mui-1qzdjd3"></div><div class="MuiBox-root mui-1lvtzne"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-sizeLarge mui-1l1167e" tabindex="0" type="button" aria-label="account of current user" aria-controls="menu-appbar" aria-haspopup="true"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path></svg></button></div><a class="MuiTypography-root MuiTypography-h5 MuiTypography-noWrap mui-cfqnlo" href="/">MyHome Ver.1</a><div class="MuiBox-root mui-1t6c9ts"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium mui-1ntl7qy" tabindex="0" href="https://sonjuhy.github.io/MyHomeVer1/about">about</a><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium mui-1ntl7qy" tabindex="0" href="https://sonjuhy.github.io/MyHomeVer1/BackEnd">BackEnd</a><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium mui-1ntl7qy" tabindex="0" href="https://sonjuhy.github.io/MyHomeVer1/Android">Android</a><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium mui-1ntl7qy" tabindex="0" href="https://sonjuhy.github.io/MyHomeVer1/IoT">IoT</a></div></div></div></header><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular mui-i6s8oy"></div><div style="height:100%;display:flex;justify-content:center;align-items:center;background-color:#f4f5ff"><div class="MuiStack-root mui-j7qwjs" style="margin:5rem"><h2 class="MuiTypography-root MuiTypography-h2 mui-vrn8qp" style="margin-bottom:3rem">🌐 백엔드 상세 설명</h2><div class="MuiStack-root mui-j7qwjs" style="display:flex;width:100%;justify-content:center;align-items:center;margin-bottom:1rem"><h4 class="MuiTypography-root MuiTypography-h4 mui-fh9wsb">백엔드 구조도(Python)</h4><div style="display:flex;width:70%;justify-content:center"><img src="https://sonjuhy.github.io/MyHomeVer1//image/image/backend.png" style="object-fit:contain;border-radius:2rem"/></div></div><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation1 mui-1nrya1i" style="margin-bottom:3rem"><h4 class="MuiTypography-root MuiTypography-h4 mui-fh9wsb">IoT 중계 기능</h4><h6 class="MuiTypography-root MuiTypography-h6 mui-ecyt4d">▪ Android ➡ Server</h6><p class="MuiTypography-root MuiTypography-body1 mui-nyzhtt">▪ 작동 순서</p><div style="display:flex;width:100%;justify-content:center;align-items:center;margin-bottom:1rem"><div style="display:flex;width:70%;align-items:center;justify-content:center"><img src="https://sonjuhy.github.io/MyHomeVer1//image/image/MQTTFromAndroid.png" style="object-fit:contain;border-radius:2rem"/></div></div><p class="MuiTypography-root MuiTypography-body1 mui-nyzhtt">▪ 코드</p><div style="margin:1rem;text-align:left"><span style="font-size:inherit;font-family:inherit;background:#282a36;color:#f8f8f2;border-radius:3px;display:flex;line-height:1.4285714285714286;overflow-x:auto;white-space:pre"><code style="font-size:inherit;font-family:inherit;line-height:1.6666666666666667;padding:8px;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span></code><code style="font-size:inherit;font-family:inherit;line-height:1.6666666666666667;padding:8px;white-space:pre">    def on_message_fromAndroid(self, client, user_data, msg):
            self.payload = msg.payload.decode(&quot;utf-8&quot;)
            print(&quot;from Android message&quot;)
            print(self.payload)
            if self.payload is not None:
                if self.payload == &#x27;reserve&#x27;:
                    print(&quot;from android if&quot;)
                    if user_data is not None:
                        self.queue = user_data
                        self.queue.put(&quot;restart&quot;)
                else:
                    print(&quot;from android else&quot;)
                    self.dict = json.JSON_Parser_android(self.payload)
                    self.on_publish(&#x27;MyHome/Light/Pub/&#x27;+self.dict[&#x27;room&#x27;], self.payload)</code></span></div><h6 class="MuiTypography-root MuiTypography-h6 mui-ecyt4d">▪ Switch ➡ Server</h6><p class="MuiTypography-root MuiTypography-body1 mui-nyzhtt">▪ 작동 순서</p><div style="display:flex;width:100%;justify-content:center;align-items:center;margin-bottom:1rem"><div style="display:flex;width:70%;justify-content:center;align-items:center"><img src="https://sonjuhy.github.io/MyHomeVer1//image/image/MQTTFromSwitch.png" style="object-fit:contain;border-radius:2rem"/></div></div><p class="MuiTypography-root MuiTypography-body1 mui-nyzhtt">▪ 코드</p><div style="margin:1rem;text-align:left"><span style="font-size:inherit;font-family:inherit;background:#282a36;color:#f8f8f2;border-radius:3px;display:flex;line-height:1.4285714285714286;overflow-x:auto;white-space:pre"><code style="font-size:inherit;font-family:inherit;line-height:1.6666666666666667;padding:8px;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span></code><code style="font-size:inherit;font-family:inherit;line-height:1.6666666666666667;padding:8px;white-space:pre">    def on_message_fromSwitch(self, client, user_data, msg):
            self.payload = msg.payload.decode(&quot;utf-8&quot;)
            if self.payload is not None and self.payload[0] == &quot;{&quot; and self.payload[-1] == &quot;}&quot;:
                self.dict = json.JSON_Parser(self.payload)
                if self.dict[&#x27;sender&#x27;] == &#x27;Server&#x27;:  # return control data part
                    if self.dict[&#x27;room&#x27;] in self.Room:
                        self.Room[self.dict[&#x27;room&#x27;]] = &quot;On&quot;
                        network.SQL_Def(&quot;Light&quot;, self.dict)
                        #print(&quot;room : &quot; + self.dict[&#x27;room&#x27;])
                        if self.dict[&#x27;room&#x27;] == &#x27;small Room&#x27;:
                            for (room, state) in self.Room.items():
                                self.diction = [(&#x27;message&#x27;, state), (&#x27;room&#x27;, room)]
                                network.SQL_Def(&quot;Connect&quot;, self.diction)
                                self.Room[room] = &quot;Off&quot;
                else:  # Light state part
                    network.SQL_Def(&quot;LightRecord&quot;, self.dict)
                    network.SQL_Def(&quot;Light&quot;, self.dict)
                    self.diction = json.JSON_ENCODE(self.dict)
                    self.on_publish(&#x27;MyHome/Light/Result&#x27;, self.diction)
            else:
                print(&quot;can&#x27;t work in on_message&quot;)
                print(self.payload)</code></span></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{}},"page":"/BackEnd","query":{},"buildId":"TmcmYBuO798HND8jnqDKH","assetPrefix":"/MyHomeVer1","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>